<script>
  
  var newGame,
      capFirst,
      Animal,
      raceType,
      meters,
      useName,
      rabName,
      useReply,
      coinFlip,
      useCoin,
      venue,
      rabSpeed,
      rabFocus,
      useSpeed,
      useFocus,
      halfcourse,
      iono,
      restart;

// Insert game into a function
  function newGame() {
// capitalize firt letter of a string. *credit stackoverflow*
  function capFirst(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
  };
// defining animal
  function Animal (name, speed, focus) { 
    this.name = name; //consructor functions takes parameters
    // Values: 0 - 9
    this.speed = speed;
    this.focus = focus;
    this.position = 0; 
    //no need for an imput parameter beause all animals will start at 0
    //creat a function for isFocused that will return true or false
    this.isFocused = function() {
      return Math.floor(Math.random() * 10 + 1) < this.focus; 
      //will grab the focus value of whatever animal
    }
    this.advance = function() {
      if (this.isFocused()) {
        this.position += this.speed; 
        // use += because it keeps track of position rather than using 0 everytime
      }
    }
    this.progReport = function() {
      return this.name + " has reached: " + this.position + " meters";
    }
  };

// Game Intro 
  alert ("This is Tony Hawk and ur playing Animal Pro Racer 2K15");
  alert ("Click 'OK' to start a New Game");
// raceType will determine the length of the race course
  alert ("Select Race Type:");
  alert ("1) Dash: 100m Sprint");
  alert ("2) Pace: 200m Track");
  alert ("3) Stamina: 300m Endurance Challenge");
    var raceType = prompt ("Dash , Pace , or Stamina").toLowerCase();
    do {
        if (raceType == "dash" || raceType == "pace" || raceType == "stamina") break;  
      alert ("DONT BE STUPEE");
      var raceType = prompt("Type 'Dash', 'Pace', or 'Stamina'").toLowerCase();
        if (raceType == "dash" || raceType == "pace" || raceType == "stamina") break;      
      }
      while (raceType !== "dash" || raceType !== "pace" || raceType !== "stamina");

    if (raceType == "dash") {
      meters = 100;
    } else if (raceType == "pace") {
      meters = 200;
    } else {
      meters = 300;
    }
  alert ("You've selected Race Type: " + capFirst(raceType))
  alert (".. Loading Game ..");
  alert ("Welcome to the 200th Annual Animal Race");
  alert ("We are down to our two finalists!");
  alert ("Introducing our challenger...");
  // prompt user for name
    var useName = capFirst(prompt ("What's your name again? (Limit: 9 Characters)"));
  // Limit useName to 9 characters
    do {
      if (useName.length <= 9 && useName.length > 0) break;  
      alert ("Character Limit: 1-9 !!");
      var useName = capFirst(prompt ("What's your name again? (Limit: 9 Characters)"));
      if (useName.length <= 9 && useName.length > 0) break;      
      }
      while (useName.length > 9 || useName.length < 1);

  alert (useName + " the Turtle!");
  alert ("and now ...");
  alert ("Introducing, our reigning champion..");
// prompt user for com opponent's name
    var rabName = capFirst(prompt ("Insert the name of your archnemesis"));

  // Limit rabName to 9 characters
    do {
      if (rabName.length <= 9 && rabName.length > 0) break;  
      alert ("Character Limit: 1-9 !!");
      var rabName = capFirst(prompt ("Insert the name of your archnemesis"));
      if (rabName.length <= 9 && rabName.length > 0) break;      
      }
      while (rabName.length > 9 || rabName.length < 1);

  alert (rabName + " the Rabbit" + "!");
  alert (rabName + " : '" + " u not on my lvl " + useName + "'");
  alert ("deeeng u gon let him talk to u like that?");
  // useReply will either affect speed or focus
    var useReply = prompt ("Type 'Yes' to ignore or 'No' to reply").toLowerCase();
      do {
        if (useReply == "yes" || useReply == "no") break;  
      alert ("IT'S SIMPLE YES OR NO QUESTION DUMMY");
      var useReply = prompt ("Type 'Yes' or 'No'").toLowerCase();
        if (useReply == "yes" || useReply == "no") break;        
      }
      while (useReply !== "yes" || useReply !== "no");

    if (useReply == "yes") {
      alert (useName + " : '" + " ... '");
      alert (rabName + " : '" + " heh loser *stupid smirk* '");
      useFoc1 = 2;
      useSpd1 = -1;
      rabSpd1 = -1;
      rabFoc1 = 2;
    } else {
      alert (useName + " : '" + " Who u talkin to long ears? '");
      alert (rabName + " : '" + " ( o`__'o# ) '");
      useFoc1 = -2;
      useSpd1 = 1;
      rabSpd1 = 2;
      rabFoc1 = -1;
    };

// 2 Venues: One favors user and the other favors com
// User flips a coin to determine venue

  coinFlip = Math.floor(Math.random() * 100 + 1);

    if (coinFlip > 50) {
      coin = "heads";
    } else {
      coin = "tails";
    };

  alert ("We will now flip a coin to decide the location of our final race!")
    var useCoin = prompt (capFirst(useName) + "! " + "Call it in the air! " + "Heads or Tails?").toLowerCase();
    // make sure they only enter "heads" or "tails"
      do {
        if (useCoin == "heads" || useCoin == "tails") break;  
      alert ("DONT BE STUPEE");
      var useCoin = prompt ("Type 'HEADS' or 'TAILS'").toLowerCase();
        if (useCoin == "heads" || useCoin == "tails") break;       
      }
      while (useCoin !== "heads" || useCoin !== "tails");
    // Advantageous venue is chosen if user wins coin toss
      if (useCoin == coin) {
        venue = "River Bank";
        useSpd2 = 2;
        rabSpd2 = 0;
      } else {
        venue = "Desert";
        useSpd2 = 0;
        rabSpd2 = 2;
      };

  alert (useName + " chooses " + useCoin.toUpperCase() + " and " + "it lands on " + coin.toUpperCase());
  alert ("The final race will be held at ... ");
  alert ("The " + venue + "!");

      if (venue == "River Bank") {
        alert (rabName + ":'" + " I'll smoke u anywhere!");
      } else {
        alert (useName + ":'" + " *gulp* '");
        alert (rabName + ":'" + " ahhh ... the sun feels GREAT! '");
      };

  alert ("Contestants report to the starting line!");

  // Add up points to determine contestants' pre-race stats & define contestants
    var rabSpeed = 5 + rabSpd1 + rabSpd2;
    var rabFocus = 2 + rabFoc1;
    var rabbit = new Animal(rabName, rabSpeed, rabFocus);
    alert (rabbit.name + " Stats: " + "Speed - " + rabbit.speed + " " + "Focus - " + rabbit.focus);
  // user aka turtle
    var useSpeed = 2 + useSpd1 + useSpd2;
    var useFocus = 5 + useFoc1;
    var turtle = new Animal(useName, useSpeed, useFocus);
    alert (turtle.name + " Stats: " + "Speed - " + turtle.speed + " " + "Focus - " + turtle.focus);

  alert ("On your marks .. Get set ..");
  alert (" ...... ");
  alert (" .......... ");
  alert ("GO!");

// Simulate Race!
  var halfcourse = meters/2;
  var cond1 = true
  var cond2 = true

  while (rabbit.position < meters && turtle.position < meters) {
    rabbit.advance();
    turtle.advance();
    while (cond1 && venue == "Desert") {
      alert ("aaaaand we're off!");
      alert (turtle.name + " : '" + " I wish there was air conditioning in this old shell... '");
      alert (rabbit.name + " : '" + " Eat my dust! '");
      cond1 = false;
    }
    while (cond1 && venue == "River") {
      alert ("aaaaand we're off!");
      alert (turtle.name + " leaps in the river and takes off!");
      cond1 = false;
    }
    alert (rabbit.progReport() + " | " + turtle.progReport());
      while (cond2 && rabbit.position >= halfcourse && rabbit.position > turtle.position) {
      turtle.speed += 3;
      alert ("What do we have here?!...");
      alert (".." + turtle.name + " IS TAKING OFF HIS SHELL!");
      alert (" Cutscene: " + turtle.name + " takes off his shell and he's swole as hell ");
      alert (turtle.name + " : '" + " F*** THIS SHELL! I AIN'T LOSING '");
      alert (turtle.name + " Speed: +3 ");
      cond2 = false;
    }
      while (cond2 && turtle.position >= halfcourse && turtle.position > rabbit.position) {
      rabbit.focus += 3;
      alert (turtle.name + " is across the halfway point!");
      alert (rabbit.name + " : ' No way I'm losing to this chump! '");
      alert (turtle.name + " Focus: +3 ");
      cond2 = false;
    }
      if (rabbit.position >= meters && rabbit.position > turtle.position) {
        alert ("Ladies and gentlemen, The race is over!");
        alert (".. and the winner is ...");
        alert (rabbit.name + "!!");
        alert ("* crowd boos *");
        alert (turtle.name + " slowly crosses the finish line ..");
        alert (rabbit.name + " : ' What took you so long? HAHA! '");
        alert ("GG U LOSE");
      restart = prompt ("U WAN PLAY AGAIN?").toLowerCase(); 
      }
      else if (turtle.position >= meters && turtle.position > rabbit.position) {
        alert ("Ladies and gentlemen, The race is over!");
        alert (".. and the winner is ...");
        alert (turtle.name + "!!");
        alert ("* crowd cheers *");
        alert (rabbit.name + " crawls across the finish line ..");
        alert (turtle.name + " : ' AHA! IN UR FACE LOSER! '");
        alert ("GG U WIN");
      restart = prompt ("U WAN PLAY AGAIN?").toLowerCase(); 
      }
      else if ((turtle.position >= meters && turtle.position == rabbit.position)) {
        alert (".. and the winner is ...");
        alert (" ..... ");
        alert (" IT'S A TIE! IONO HOW THIS HAPPENED THO ");
        alert (" (super exclusive endgame cutscene) ");
      restart = prompt ("U WAN PLAY AGAIN?").toLowerCase(); 
      };
  };

  do {
    if (restart == "yes" || restart == "no") break;  
    alert ("IT'S SIMPLE YES OR NO QUESTION DUMMY");
    var restart = prompt ("Type 'YES' or 'NO'").toLowerCase();
    if (restart == "yes" || restart == "no") break;        
    }
    while (restart !== "yes" || restart !== "no");

  if (restart == "yes") {
    alert ("COOL LEMME RESTART")
    alert ("....restarting....");
    newGame();
  } else {
      alert ("AIIT");
    };

 };

  newGame()
 
</script>